"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../core/TempNode.cjs.js");function e(e,s,i,r){t.TempNode.call(this),this.a=e,"string"!=typeof s?this.b=s:r=s,"string"!=typeof i?this.c=i:r=i,this.method=r}require("three"),require("../core/Node.cjs.js"),e.RAD="radians",e.DEG="degrees",e.EXP="exp",e.EXP2="exp2",e.LOG="log",e.LOG2="log2",e.SQRT="sqrt",e.INV_SQRT="inversesqrt",e.FLOOR="floor",e.CEIL="ceil",e.NORMALIZE="normalize",e.FRACT="fract",e.SATURATE="saturate",e.SIN="sin",e.COS="cos",e.TAN="tan",e.ASIN="asin",e.ACOS="acos",e.ARCTAN="atan",e.ABS="abs",e.SIGN="sign",e.LENGTH="length",e.NEGATE="negate",e.INVERT="invert",e.MIN="min",e.MAX="max",e.MOD="mod",e.STEP="step",e.REFLECT="reflect",e.DISTANCE="distance",e.DOT="dot",e.CROSS="cross",e.POW="pow",e.MIX="mix",e.CLAMP="clamp",e.REFRACT="refract",e.SMOOTHSTEP="smoothstep",e.FACEFORWARD="faceforward",e.prototype=Object.create(t.TempNode.prototype),e.prototype.constructor=e,e.prototype.nodeType="Math",e.prototype.hashProperties=["method"],e.prototype.getNumInputs=function(){switch(this.method){case e.MIX:case e.CLAMP:case e.REFRACT:case e.SMOOTHSTEP:case e.FACEFORWARD:return 3;case e.MIN:case e.MAX:case e.MOD:case e.STEP:case e.REFLECT:case e.DISTANCE:case e.DOT:case e.CROSS:case e.POW:return 2;default:return 1}},e.prototype.getInputType=function(t){var e=t.getTypeLength(this.a.getType(t)),s=this.b?t.getTypeLength(this.b.getType(t)):0,i=this.c?t.getTypeLength(this.c.getType(t)):0;return e>s&&e>i?this.a.getType(t):s>i?this.b.getType(t):this.c.getType(t)},e.prototype.getType=function(t){switch(this.method){case e.LENGTH:case e.DISTANCE:case e.DOT:return"f";case e.CROSS:return"v3"}return this.getInputType(t)},e.prototype.generate=function(t,s){var i,r,h,a=this.a?t.getTypeLength(this.a.getType(t)):0,o=this.b?t.getTypeLength(this.b.getType(t)):0,c=this.c?t.getTypeLength(this.c.getType(t)):0,p=this.getInputType(t),u=this.getType(t);switch(this.method){case e.NEGATE:return t.format("( -"+this.a.build(t,p)+" )",p,s);case e.INVERT:return t.format("( 1.0 - "+this.a.build(t,p)+" )",p,s);case e.CROSS:i=this.a.build(t,"v3"),r=this.b.build(t,"v3");break;case e.STEP:i=this.a.build(t,1===a?"f":p),r=this.b.build(t,p);break;case e.MIN:case e.MAX:case e.MOD:i=this.a.build(t,p),r=this.b.build(t,1===o?"f":p);break;case e.REFRACT:i=this.a.build(t,p),r=this.b.build(t,p),h=this.c.build(t,"f");break;case e.MIX:i=this.a.build(t,p),r=this.b.build(t,p),h=this.c.build(t,1===c?"f":p);break;default:i=this.a.build(t,p),this.b&&(r=this.b.build(t,p)),this.c&&(h=this.c.build(t,p))}var n=[];n.push(i),r&&n.push(r),h&&n.push(h);var T=this.getNumInputs(t);if(n.length!==T)throw Error(`Arguments not match used in "${this.method}". Require ${T}, currently ${n.length}.`);return t.format(this.method+"( "+n.join(", ")+" )",u,s)},e.prototype.copy=function(e){return t.TempNode.prototype.copy.call(this,e),this.a=e.a,this.b=e.b,this.c=e.c,this.method=e.method,this},e.prototype.toJSON=function(t){var e=this.getJSONNode(t);return e||((e=this.createJSONNode(t)).a=this.a.toJSON(t).uuid,this.b&&(e.b=this.b.toJSON(t).uuid),this.c&&(e.c=this.c.toJSON(t).uuid),e.method=this.method),e},exports.MathNode=e;
