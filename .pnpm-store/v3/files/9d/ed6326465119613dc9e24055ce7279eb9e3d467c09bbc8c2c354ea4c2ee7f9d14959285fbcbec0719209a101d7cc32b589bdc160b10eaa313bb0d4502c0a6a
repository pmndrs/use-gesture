"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("@babel/runtime/helpers/extends"),n=require("@babel/runtime/helpers/objectWithoutPropertiesLoose"),t=require("@react-three/fiber"),r=require("react"),u=require("three-stdlib");function o(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}function l(e){if(e&&e.__esModule)return e;var n=Object.create(null);return e&&Object.keys(e).forEach((function(t){if("default"!==t){var r=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(n,t,r.get?r:{enumerable:!0,get:function(){return e[t]}})}})),n.default=e,Object.freeze(n)}var c=o(e),i=o(n),a=l(r),d=a.forwardRef((function(e,n){var r=e.selector,o=e.onChange,l=e.onLock,d=e.onUnlock,f=i.default(e,["selector","onChange","onLock","onUnlock"]),s=f.camera,v=i.default(f,["camera"]),E=t.useThree((function(e){return e.gl})),L=t.useThree((function(e){return e.camera})),b=t.useThree((function(e){return e.invalidate})),m=s||L,h=a.useState((function(){return new u.PointerLockControls(m,E.domElement)}))[0];return a.useEffect((function(){var e=function(e){b(),o&&o(e)};return null==h||null==h.addEventListener||h.addEventListener("change",e),l&&(null==h||null==h.addEventListener||h.addEventListener("lock",l)),d&&(null==h||null==h.addEventListener||h.addEventListener("unlock",d)),function(){null==h||null==h.removeEventListener||h.removeEventListener("change",e),l&&(null==h||null==h.addEventListener||h.addEventListener("lock",l)),d&&(null==h||null==h.addEventListener||h.addEventListener("unlock",d))}}),[o,l,d,h,b]),a.useEffect((function(){var e=function(){return null==h?void 0:h.lock()},n=r?Array.from(document.querySelectorAll(r)):[document];return n.forEach((function(n){return n&&n.addEventListener("click",e)})),function(){n.forEach((function(n){return n?n.removeEventListener("click",e):void 0}))}}),[h,r]),h?a.createElement("primitive",c.default({ref:n,dispose:void 0,object:h},v)):null}));exports.PointerLockControls=d;
